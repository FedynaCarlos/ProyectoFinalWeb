<!DOCTYPE html>
<html lang="en">
<<%- include('./partials/head') %>
<head>
    <title>Crear Productos</title>
</head>
<body>
    <%- include('./partials/header') %>
    <main>
        <h2>Formulario de edición de productos</h2>
        <!--Se realiza main con la finalidad de poder realizar un flexbox y poder manejar sus propiedades-->
        <form  class= "createProduct" action="/administrar/edit/<%= vinoEditar.produc_id%>?_method=PUT" method="POST" enctype="multipart/form-data">
        <!--<form action="" method="post" class="createProduct"> -->
           <div class="controlIngresoProductos">
               <label for="">Nombre del Producto</label>
               <input class="input1" type="text" name="nombre" id="nombre" placeholder="Ej: Vino casillero del Diablo" value="<%= vinoEditar.nombre%>">
               <% if (typeof errors != 'undefined' && typeof errors.nombre != 'undefined') { %>
                <span style="color: red"><%= errors.nombre.msg %></span> 
            <% } %>
           </div>
            <div class="controlIngresoProductos">
                <label for="">Precio del produto:</label>
                <input class="input1" type="number" name="precio" id="precio" placeholder="Ej: 5.400" value="<%= vinoEditar.precio%>">
                <% if (typeof errors != 'undefined' && typeof errors.precio != 'undefined') { %>
                    <span style="color: red"><%= errors.precio.msg %></span> 
                <% } %>
            </div>
            <div class="controlIngresoProductos">
                <label for="">Cepa:</label>
                <select class="input1" name="cepa" id="cepa">
                    <% for (let i=0; i < cepas.length; i++) { %>
                        <option value="<%= cepas[i].cepa_id %>" <%= vinoEditar.cepa_id == cepas[i].cepa_id ? "selected" : null %>><%= cepas[i].descripcion%></option>
                        
                    <% } %>
                    <% if (typeof errors !='undefined' && typeof errors.cepa !='undefined' ) { %>
                        <span style="color: red"><%= errors.cepa.msg %></span>
                    <% } %>
                </select>
            </div>
            <div class="controlIngresoProductos">
                <label for="">Categoría:</label>
                <select name="categoria" class= "input1"  id="categoria" required>
                    <option disabled value="#">Seleccione una categoria</option>
                    <option value="Espumoso" <%= vinoEditar.categoria == "Espumoso" ? "selected" : null %>>Espumoso</option>
                    <option value="Blanco" <%= vinoEditar.categoria == "Blanco" ? "selected" : null %>>Blanco</option>
                    <option value="Tinto" <%= vinoEditar.categoria == "Tinto" ? "selected" : null %>>Tinto</option>
                    <option value="Rosado"<%= vinoEditar.categoria == "Rosado" ? "selected" : null %>>Rosado</option>
                </select>
               <% if (typeof errors != 'undefined' && typeof errors.categoria != 'undefined') { %>
                    <span style="color: red"><%= errors.categoria.msg %></span> 
                <% } %>
            </div>
            <div class="controlIngresoProductos">
                <figure class="form-group">
                    <img class="w-100e" src="/images/<%= vinoEditar.imagen%>" alt="producto <%= vinoEditar.nombre%>">
                </figure>
                <input type="hidden" name="oldImagen" value="<%= vinoEditar.imagen%>">
                <!--De esta forma logro conservar y que viaje la imagen anterior de esta forma evito que el usuario seleccione una imagen nuevamente, ( si no lo desea) -->
                <input type="file" name="imagen">

               <!-- <label for="">Agregar imagen</label>
                <input type="file" name="image" id="image"> -->
            </div>
            <div class="controlIngresoProductos">

            </div>
            <div class="controlIngresoProductos2">
                <label for="">Descripción</label>
                <textarea class="textaread" cols="90" name="descripcion" id="descripcion" rows="6" placeholder="Breve descripción" ><%= vinoEditar.descripcion%></textarea>
            </div>
            <% if (typeof errors != 'undefined' && typeof errors.descripcion != 'undefined') { %>
                <span style="color: red"><%= errors.descripcion.msg %></span> 
            <% } %>
            <div class="controlIngresoProductos">
                <button type="submit" class="boton-formulario">Actualizar</button>
                <button href="/administrar"  class="boton-formulario">Volver</button>
                
            </div>
        </form>
</body> 
</html>